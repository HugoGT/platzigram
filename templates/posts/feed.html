{% extends "base.html" %}
{% load humanize %}
{% load static %}

{% block container %}

{% if messages %}
<ul class="">
  {% for message in messages %}
  <li class="">
    {% if message.tags %} {{ message }} {% endif %}
  </li>
  {% endfor %}
</ul>
{% endif %}

{% for post in posts %}

<div class="post">
  <div class="post_user">
    <a href="{% url 'users:user_detail' post.user.username %}">
      <img
        class="user-img"
        src="
        {% if post.user.profile.picture %}
          {{ post.user.profile.picture.url }}
        {% else %}
          {% static 'img/default-profile.png' %}
        {% endif %}"
        alt="{{ post.user.get_full_name }}"
      />
      <p class="post_username">{{ post.user.username }}</p>
    </a>
  </div>
  <div class="post_img">
    <a href="{% url 'posts:post_detail' post.id %}">
      <img
      src="{{ post.photo.url }}"
      alt="{{ post.title }}"
      />
    </a>
  </div>
  <p class="post_title">{{ post.title }}</p>
  <div class="post_info">
    <form method="POST" class="" action="{% url 'posts:like' post.id %}">
      {% csrf_token %}
      <button type="submit" class="post_info-button">
        {% if user in post.likes.all %}
          <i class="far fa-heart liked"></i>
        {% else %}
          <i class="far fa-heart"></i>
        {% endif %}
      </button>
    </form>
    <p class="">{{ post.count_likes }} like{{post.count_likes|pluralize }} - {{ post.created|naturaltime }}</p>
  </div>
</div>

{% endfor %}

{% include "pagination.html" %}

{% endblock container %}
