{% extends "base.html" %}
{% load static %}

{% block container %}

<div class="container">
  <div class="row">

    {% if messages %}
      <ul class="messages list-unstyled">
      {% for message in messages %}
        <li class="alert alert-success">
        {% if message.tags %}
          {{ message }}
        {% endif %}
        </li>
      {% endfor %}
      </ul>
    {% endif %}

    {% for post in posts %}

    <div class="col-sm-12 col-md-8 mt-2 offset-md-2 post-container">
      <div class="media-container py-3 ps-0">
        <a href="{% url 'users:user_detail' post.user.username %}" class="d-flex align-items-center">
          <img
          class="rounded-circle"
          height="40"
          src="
          {% if post.user.profile.picture %}
            {{ post.user.profile.picture.url }}
          {% else %}
            {% static 'img/default-profile.png' %}
          {% endif %}"
          alt="{{ post.user.get_full_name }}"
          />
          <p class="m-0 username">
            {{ post.user.username }}
          </p>
        </a>
      </div>
      <a class="feed-img" href="{% url 'posts:post_detail' post.id %}">
        <img
        style="width: 100%"
        src="{{ post.photo.url }}"
        alt="{{ post.title }}"
        />
      </a>
      <h5 class="m-3 ms-0">{{ post.title }}</h5>
      <div class="post-detail d-block mb-2">
        <form method="POST" class="d-inline-block" action="{% url 'posts:like' post.id %}">
          {% csrf_token %}
          <button type="submit" class="btn btn-outline-light btn-like p-0">
            {% if user in post.likes.all %}
              <i class="far fa-heart" style="color: #c90e0e; font-size: 20px"></i>
            {% else %}
              <i class="far fa-heart" style="color: #000; font-size: 20px"></i>
            {% endif %}
          </button>
        </form>
        <p class="m-0 d-inline-block">
          {{ post.count_likes }} - {{ post.created }}
        </p>
      </div>
    </div>

    {% endfor %}

    {% include "pagination.html" %}

  </div>
</div>

{% endblock container %}
